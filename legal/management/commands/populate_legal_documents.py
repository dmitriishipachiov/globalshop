from django.core.management.base import BaseCommand
from legal.models import UserAgreement, PrivacyPolicy, PersonalDataPolicy

class Command(BaseCommand):
    help = 'Populates the database with default legal documents'

    def handle(self, *args, **options):
        # Create Privacy Policy
        privacy_policy, created = PrivacyPolicy.objects.get_or_create(
            title="Политика конфиденциальности",
            defaults={
                'content': """Настоящая Политика конфиденциальности регулирует обработку и использование персональной информации, которую Интернет-магазин "GlobalShop" может получать от пользователей сайта.

1. Общие положения
- Настоящая Политика конфиденциальности относится ко всей информации, которую Интернет-магазин "GlobalShop" может получить о пользователе во время использования сайта.
- Использование сайта означает безоговорочное согласие пользователя с настоящей Политикой и указанными в ней условиями обработки его персональной информации.

2. Персональная информация пользователей
- Персональная информация - это информация, которая относится к субъекту персональных данных, в частности фамилия, имя, отчество, год, месяц, дата и место рождения, адрес, семейное, социальное, имущественное положение, образование, профессия, доходы.
- Интернет-магазин собирает и хранит только ту персональную информацию, которая необходима для оформления и доставки заказов.

3. Цели сбора информации
- Идентификация стороны в рамках соглашений и договоров.
- Предоставление пользователю услуг доступа к персонализированным ресурсам сайта.
- Установление с пользователем обратной связи, включая направление уведомлений, запросов, касающихся использования сайта.

4. Условия обработки персональной информации
- Обработка персональной информации осуществляется на основе принципов законности и справедливости, с соблюдением конфиденциальности.
- Обработка персональной информации осуществляется с согласия субъекта персональных данных на обработку его персональных данных.

5. Хранение и использование персональной информации
- Персональная информация пользователей хранится исключительно на электронных носителях и обрабатывается с использованием автоматизированных систем.
- По отношению к персональной информации пользователей сохраняется ее конфиденциальность.

6. Передача персональной информации
- Интернет-магазин не передает персональную информацию третьим лицам без согласия пользователя, за исключением случаев, предусмотренных законодательством.

7. Изменения в Политике конфиденциальности
- Интернет-магазин оставляет за собой право вносить изменения в настоящую Политику конфиденциальности без согласия пользователя.
""",
                'is_active': True
            }
        )

        # Create User Agreement
        user_agreement, created = UserAgreement.objects.get_or_create(
            title="Пользовательское соглашение",
            defaults={
                'content': """Настоящее Пользовательское соглашение регулирует отношения между Интернет-магазином "GlobalShop" и пользователями сайта.

1. Общие положения
- Настоящее Соглашение является публичной офертой и принимается пользователем в полном объеме без каких-либо изъятий и ограничений.
- Администрация сайта оставляет за собой право в любое время изменять, добавлять или удалять пункты настоящего Соглашения без уведомления пользователя.

2. Предмет соглашения
- Администрация предоставляет пользователю право на использование сайта и его сервисов на условиях, установленных настоящим Соглашением.
- Пользователь обязуется использовать сайт и его сервисы исключительно в законных целях.

3. Права и обязанности сторон
- Пользователь имеет право на доступ к контенту сайта, на размещение отзывов и комментариев.
- Пользователь обязуется не использовать сайт для распространения вредоносного программного обеспечения, спама, и другой запрещенной информации.
- Администрация имеет право изменять контент сайта, приостанавливать или прекращать предоставление услуг.

4. Ответственность сторон
- Пользователь несет полную ответственность за нарушение законодательства при использовании сайта.
- Администрация не несет ответственности за ущерб, причиненный пользователю в результате использования сайта.

5. Условия использования
- Пользователь обязуется не передавать свои учетные данные третьим лицам.
- Пользователь обязуется не использовать автоматизированные средства для сбора информации с сайта.

6. Разрешение споров
- Все споры между пользователем и администрацией решаются путем переговоров.
- В случае невозможности разрешения спора путем переговоров, спор подлежит разрешению в судебном порядке.

7. Прочие условия
- Настоящее Соглашение вступает в силу с момента его принятия пользователем и действует до прекращения использования сайта.
""",
                'is_active': True
            }
        )

        # Create Personal Data Policy
        personal_data_policy, created = PersonalDataPolicy.objects.get_or_create(
            title="Политика обработки персональных данных",
            defaults={
                'content': """Настоящая Политика обработки персональных данных разработана в соответствии с Федеральным законом от 27.07.2006. №152-ФЗ «О персональных данных».

1. Общие положения
- Настоящая Политика определяет порядок обработки персональных данных и меры по обеспечению безопасности персональных данных.
- Оператор ставит своей важнейшей целью и условием осуществления своей деятельности соблюдение прав и свобод человека и гражданина при обработке его персональных данных.

2. Основные понятия
- Персональные данные - любая информация, относящаяся к прямо или косвенно определенному или определяемому физическому лицу.
- Обработка персональных данных - любое действие с персональными данными, включая сбор, запись, систематизацию, накопление, хранение, уточнение, извлечение, использование, передачу, обезличивание, блокирование, удаление, уничтожение.

3. Права субъектов персональных данных
- Субъект персональных данных имеет право на получение информации, касающейся обработки его персональных данных.
- Субъект персональных данных имеет право на доступ к своим персональным данным и их исправление.
- Субъект персональных данных вправе требовать удаления своих персональных данных.

4. Меры по защите персональных данных
- Оператор принимает необходимые правовые, организационные и технические меры для защиты персональных данных от неправомерного или случайного доступа к ним, уничтожения, изменения, блокирования, копирования, предоставления, распространения персональных данных, а также от иных неправомерных действий.

5. Условия обработки персональных данных
- Обработка персональных данных осуществляется с согласия субъекта персональных данных на обработку его персональных данных.
- Обработка персональных данных необходима для исполнения договора, стороной которого является субъект персональных данных.

6. Сроки обработки персональных данных
- Срок обработки персональных данных определяется достижением целей обработки, если иной срок не предусмотрен договором или действующим законодательством.

7. Трансграничная передача персональных данных
- Оператор осуществляет трансграничную передачу персональных данных только на территорию иностранных государств, обеспечивающих адекватную защиту прав субъектов персональных данных.

8. Заключительные положения
- Пользователь может получить любые разъяснения по интересующим вопросам, касающимся обработки его персональных данных, обратившись к Оператору.
""",
                'is_active': True
            }
        )

        self.stdout.write(self.style.SUCCESS('Successfully populated legal documents:'))
        self.stdout.write(f'- Privacy Policy: {"Created" if created else "Already exists"}')
        self.stdout.write(f'- User Agreement: {"Created" if created else "Already exists"}')
        self.stdout.write(f'- Personal Data Policy: {"Created" if created else "Already exists"}')