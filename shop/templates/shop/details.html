{% extends 'base.html' %}
{% load static %}
{% load shop_filters %}
{% block title %}
  Описание товара
{% endblock %}

{% block meta_tags %}
  <meta name="description" content="Интернет-магазин" />
  <meta name="keywords" content="Интернет-магазин, товары, акции" />
  <meta name="author" content="Название компании" />
{% endblock %}

{% block content %}
  <link rel="stylesheet" href="{% static 'Product-Details-Template.css' %}" media="screen" />
  <link rel="stylesheet" href="{% static 'favorite-icon.css' %}" />

  <div class="u-clearfix u-content-layout u-sheet">
<!-- Фильтр категорий -->
      <aside class="u-border-2 u-border-custom-color-1 u-indent-40 u-sidebar u-block-2618-1">
        <div class="u-block u-indent-30 u-block-2618-2">
          <div class="u-block-container u-clearfix">
            <h5 class="u-align-center u-block-header u-h-spacing-0 u-text u-text-custom-color-1 u-v-spacing-0 u-block-2618-3">
            <a href="{% url 'shop:shop' %}" class="category-link">Категории</a>
            </h5>
            <div class="u-block-content u-text u-text-default u-text-3 u-block-2618-4">
              <nav class="categories-nav">
                <ul class="u-unstyled u-text u-text-custom-color-1">
                  {% for category in categories %}
                    <li class="category-item {% if selected_category and selected_category.slug == category.slug %}active{% endif %}">
                      <a href="{% url 'shop:category' category.slug %}" class="u-button-style u-category-link u-nav-link u-text-active-palette-3-base u-text-body-alt-color">
                        {{ category.title }}
                      </a>
                      {% if category.subcategories.all %}
                        <ul class="subcategories-list">
                          {% for subcategory in category.subcategories.all %}
                            <li class="subcategory-item {% if selected_subcategory and selected_subcategory.slug == subcategory.slug %}active{% endif %}">
                              <a href="{% url 'shop:shop' %}?category={{ category.slug }}&subcategory={{ subcategory.slug }}" class="u-button-style u-subcategory-link u-nav-link u-text-active-palette-3-base u-text-body-alt-color">
                                {{ subcategory.title }}
                              </a>
                            </li>
                          {% endfor %}
                        </ul>
                      {% endif %}
                    </li>
                  {% endfor %}
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </aside>
      <div class="u-content">
        <section class="u-align-center u-clearfix u-container-align-center u-section-1" id="block-2">
          <div class="u-clearfix u-sheet u-valign-middle-xl u-sheet-1"><!--product--><!--product_options_json--><!--{"source":"6"}--><!--/product_options_json-->
            
      <div class="custom-expanded u-container-style u-product u-product-1" data-product-id="6" data-product-variation-values="{}">
              <div class="u-container-layout u-container-layout-1"><!--product_gallery--><!--options_json--><!--{"maxItems":""}--><!--/options_json-->
                <div class="u-carousel u-expanded-width-xs u-gallery u-layout-thumbnails u-lightbox u-no-transition u-product-control u-show-text-none u-thumbnails-position-left u-gallery-1" data-interval="5000" data-u-ride="carousel" id="carousel-16b4">
                  <div class="u-carousel-inner u-gallery-inner u-gallery-inner-1" role="listbox">
                    {% for image in images %}
                    <div class="u-carousel-item u-gallery-item{% if forloop.first %} u-active{% endif %}">
                      <div class="u-back-slide">
                        <img class="u-back-image u-expanded u-image-contain" src="{{ image.image.url }}" />
                        {% if product.quantity == 0 %}
                      <div class="u-not-available-overlay">Нет в наличии</div>
                    {% endif %}
                      </div>
                      <div class="u-container-align-center u-over-slide u-valign-middle-xl u-over-slide-1">
                        <h3 class="u-align-center u-gallery-heading" style="margin-right: -205px; margin-left: -205px;">{{ product.title }}</h3>
                        <p class="u-align-center u-gallery-text" style="margin-right: -205px; margin-left: -205px;">{{ product.description }}</p>
                      </div>
                    </div>
                    {% empty %}
                    <div class="u-carousel-item u-gallery-item">
                      <div class="u-back-slide">
                        <img class="u-back-image u-expanded u-image-contain" src="{% static 'images/no-image.png' %}">
                        {% if product.quantity == 0 %}
                      <div class="u-not-available-overlay">Нет в наличии</div>
                    {% endif %}
                      </div>
                      <div class="u-container-align-center u-over-slide u-valign-middle-xl u-over-slide-1">
                        <h3 class="u-align-center u-gallery-heading" style="margin-right: -205px; margin-left: -205px;">{{ product.title }}</h3>
                        <p class="u-align-center u-gallery-text" style="margin-right: -205px; margin-left: -205px;">{{ product.description }}</p>
                      </div>
                    </div></div>
                    {% endfor %}
                  </div>
                  <a class="u-absolute-vcenter u-carousel-control u-carousel-control-prev u-icon-rectangle u-opacity u-opacity-70 u-spacing-10 u-text-body-alt-color u-carousel-control-1" href="#carousel-16b4" role="button" data-u-slide="prev"><span aria-hidden="true">
                      <svg viewBox="0 0 451.847 451.847"><path d="M97.141,225.92c0-8.095,3.091-16.192,9.259-22.366L300.689,9.27c12.359-12.359,32.397-12.359,44.751,0
c12.354,12.354,12.354,32.388,0,44.748L173.525,225.92l171.903,171.909c12.354,12.354,12.354,32.391,0,44.744
c-12.354,12.365-32.386,12.365-44.745,0l-194.29-194.281C100.226,242.115,97.141,234.018,97.141,225.92z"></path></svg></span><span class="sr-only">
                      <svg viewBox="0 0 451.847 451.847"><path d="M97.141,225.92c0-8.095,3.091-16.192,9.259-22.366L300.689,9.27c12.359-12.359,32.397-12.359,44.751,0
c12.354,12.354,12.354,32.388,0,44.748L173.525,225.92l171.903,171.909c12.354,12.354,12.354,32.391,0,44.744
c-12.354,12.365-32.386,12.365-44.745,0l-194.29-194.281C100.226,242.115,97.141,234.018,97.141,225.92z"></path></svg></span>
                  </a>
                  <a class="u-absolute-vcenter u-carousel-control u-carousel-control-next u-icon-rectangle u-opacity u-opacity-70 u-spacing-10 u-text-body-alt-color u-carousel-control-2" href="#carousel-16b4" role="button" data-u-slide="next"><span aria-hidden="true">
                      <svg viewBox="0 0 451.846 451.847"><path d="M345.441,248.292L151.154,442.573c-12.359,12.365-32.397,12.365-44.75,0c-12.354-12.354-12.354-32.391,0-44.744
L278.318,225.92L106.409,54.017c-12.354-12.359-12.354-32.394,0-44.748c12.354-12.359,32.391-12.359,44.75,0l194.287,194.284
c6.177,6.18,9.262,14.271,9.262,22.366C354.708,234.018,351.617,242.115,345.441,248.292z"></path></svg></span><span class="sr-only">
                      <svg viewBox="0 0 451.846 451.847"><path d="M345.441,248.292L151.154,442.573c-12.359,12.365-32.397,12.365-44.75,0c-12.354-12.354-12.354-32.391,0-44.744
L278.318,225.92L106.409,54.017c-12.354-12.359-12.354-32.394,0-44.748c12.354-12.359,32.391-12.359,44.75,0l194.287,194.284
c6.177,6.18,9.262,14.271,9.262,22.366C354.708,234.018,351.617,242.115,345.441,248.292z"></path></svg></span>
                  </a>
                  <ol class="u-carousel-thumbnails u-spacing-15 u-vertical-spacing u-carousel-thumbnails-1">
                    {% for image in images %}
                    <li class="u-carousel-thumbnail u-carousel-thumbnail-1 u-active" data-u-target="#carousel-16b4" data-u-slide-to="{{ forloop.counter0 }}">
                      <img class="u-carousel-thumbnail-image u-image" src="{{ image.image.url }}">
                    </li>
                    {% empty %}
                    <li class="u-carousel-thumbnail u-carousel-thumbnail-1" data-u-target="#carousel-16b4" data-u-slide-to="1">
                      <img class="u-carousel-thumbnail-image u-image" src="{% static 'images/no-image.png' %}">
                    </li>
                    {% endfor %}
                  </ol>
                </div><!--/product_gallery--><!--product_title-->
                <h2 class="u-align-center u-product-control u-text u-text-body-alt-color u-text-1">{{ product.title }}</h2><!--/product_title--><!--product_price-->
                <div data-add-zero-cents="true" class="u-align-center u-product-control u-product-price u-product-price-1">
                  {% if product.discount %}
                  <div class="u-price-wrapper u-spacing-10"><!--product_old_price-->
                    <div class="u-old-price u-text-palette-2-base" style="text-decoration: line-through !important;">{{ product.price|format_thousands }}</div><!--/product_old_price--><!--product_regular_price-->
                    <div class="u-price u-text-palette-3-base" style="font-size: 1.875rem; font-weight: 700;">{{ product.sell_price|format_thousands }}</div><!--/product_regular_price-->
                  </div>
                </div><!--/product_price--><!--product_content-->
                {% else %}
                <div class="u-price u-text-palette-3-base" style="font-size: 1.875rem; font-weight: 700;">{{ product.price|format_thousands }}</div>
              {% endif %}
                <div class="u-align-center u-product-control u-product-desc u-text u-text-body-alt-color u-text-2">{{ product.description }}</div><!--/product_content--><!--product_button--><!--options_json--><!--{"clickType":"buy-now","content":"Купить сейчас"}--><!--/options_json-->

                {% if product.quantity > 0 %}
            <form method="post" action="{% url 'carts:add_to_cart' product.slug %}">
              {% csrf_token %}
              <button type="submit" class="u-active-palette-3-base u-border-2 u-border-black u-btn u-button-style u-hover-palette-3-base u-palette-3-base u-product-control u-text-active-black u-text-black u-text-hover-black u-btn-1">Купить</button>
            </form>
          {% else %}
            <div class="u-product-control u-product-price u-product-price-1">
              <div class="u-price-wrapper u-spacing-10">
                <div class="u-price u-text-palette-3-base" style="font-size: 1.875rem; font-weight: 700;">Нет в наличии</div>
              </div>
            </div>
          {% endif %}

              </div>
            </div><!--/product-->
          </div>
        </section>
      </div>
    </div>

  <!-- JavaScript for favorite functionality -->
  <script src="{% static 'favorite-functions.js' %}"></script>
{% endblock %}
